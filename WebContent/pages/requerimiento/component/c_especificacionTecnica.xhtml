<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:func="http://resources/functions"
	xmlns:p="http://primefaces.org/ui">


<p:outputPanel style="text-align:center;">




	<p:accordionPanel multiple="true" id="accordion">
		<p:tab title="Información del Pedido">

			<p:panelGrid columns="4" id="panelGridCabecera"
				rendered="#{not empty requerimiento.requerimientoResponse}"
				columnClasses="label,value"
				styleClass="gandalfPanelClassSectionFormHeader">

				<p:column>
					<p:outputLabel value="Número del pedido" />
				</p:column>
				<p:column>
					<p:inputText
						value="#{requerimiento.requerimientoResponse.nroPedido}"
						disabled="true" />
				</p:column>

				<p:column>
					<p:outputLabel value="Fecha del Pedido:" />
				</p:column>
				<p:column>
					<p:inputText
						value="#{requerimiento.requerimientoResponse.formatoFecha}"
						disabled="true" />
				</p:column>

				<p:column>
					<p:outputLabel value="Número de SINAD:" />
				</p:column>
				<p:column>
					<p:inputText
						value="#{requerimiento.requerimientoResponse.numeroSinad}"
						disabled="true" />
				</p:column>

				<p:column>
					<p:outputLabel value="Monto del pedido" />
				</p:column>
				<p:column>
					<p:inputText
						value="#{requerimiento.requerimientoResponse.montoPedido}"
						disabled="true" />
				</p:column>

				<p:column>
					<p:outputLabel value="Estado del Pedido(SisAbas):" />
				</p:column>
				<p:column>
					<p:inputText
						value="#{requerimiento.requerimientoResponse.formatoFecha}"
						disabled="true" />
				</p:column>

				<p:column>
					<p:outputLabel value="Tipo de documento SINAD:" />
				</p:column>
				<p:column>
					<p:inputText
						value="#{requerimiento.requerimientoResponse.numeroSinad}"
						disabled="true" />
				</p:column>

				<p:outputLabel value="Descripción del Pedido:" style="" />
				<p:inputTextarea
					value="#{requerimiento.requerimientoResponse.motivoPedido}"
					disabled="true" style="width:300px" />

			</p:panelGrid>


		</p:tab>

		<p:tab title="Información general" titleStyleClass="blueTab">
			<p:panelGrid
				rendered="#{not empty requerimiento.requerimientoResponse}" 
				columnClasses="label,value"
				styleClass="gandalfPanelClassSectionFormHeader">

				<p:row>
					<p:column>
						<p:outputLabel value="Tipo de especificación técnica" for="txtReq" />
					</p:column>
					<p:column>
						<p:selectOneMenu id="txtReq" value="#{requerimiento.documentotecnico.idcatalogotipotdr}" style="width:200px;" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}">
							<f:selectItems
										value="#{pedido.listaGentablaIdcatalogotipoet}"
										var="var" itemLabel="#{var.vchregdescri}"
										itemValue="#{var.vchregcodigo}" />
						</p:selectOneMenu>
					</p:column>

					<div>
						<p:column>
							<p:outputLabel value="Número de PAC:" />
						</p:column>
					</div>
					<p:column>
						<p:inputNumber value="#{requerimiento.documentotecnico.nropac}"  disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"/>
					</p:column>
				</p:row>
				<p:row>

					<p:column>
						<p:outputLabel value="Denominación de la contratación:" />
					</p:column>
					<p:column>
						<p:inputTextarea value="#{requerimiento.documentotecnico.denominacioncontratacion}" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"
							style="width:300px;" />
					</p:column>
				</p:row>

				<p:row>
					<p:column>
						<p:outputLabel value="Finalidad pública" />
					</p:column>
					<p:column>
						<p:inputTextarea value="#{requerimiento.documentotecnico.finalidadpublica}" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"
							style="width:300px;" />
					</p:column>
				</p:row>

				<p:row>
					<p:column>
						<p:outputLabel value="Objetivos de la contratación:" />
					</p:column>
					<p:column>
						<p:inputTextarea value="#{requerimiento.documentotecnico.objetocontratacion}" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"
							style="width:300px;" />
					</p:column>
				</p:row>

				<p:row>
					<p:column>
						<p:outputLabel value="Antecedentes:" />
					</p:column>
					<p:column>
						<p:inputTextarea value="#{requerimiento.documentotecnico.antecedentes}" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"
							style="width:300px;" />
					</p:column>
				</p:row>

			</p:panelGrid>
		</p:tab>

		<p:tab title="Items">
           
			<p:dataTable var="var"
				value="#{requerimiento.listaItemRequerimientos}"
				style="white-space:nowrap!important; width:800px; font-size:5px;"
				reflow="true" scrollable="true" scrollHeight="">
				<p:column width="8%" headerText="NÚMERO">
					<h:outputText value="#{var.numeracion}" />
				</p:column>

				<p:column width="18%" headerText="NÚMERO DE ITEM">
					<h:outputText value="#{var.itemBien}" />
				</p:column>

				<p:column headerText="DESCRIPCIÓN DEL ITEM">
					<h:outputText value="#{var.nombreItem}" />
				</p:column>

				<p:column headerText="CANTIDAD" width="15%">
					<h:outputText value="#{var.cantSolicitada}" />
				</p:column>

				<f:facet name="footer">
			             TOTAL DE ITEMS #{fn:length(requerimiento.listaItemRequerimientos)}.
			    </f:facet>
			</p:dataTable>
		</p:tab>





		<p:tab title="Lugar de prestación">
			<div align="right">
				<p:commandButton
					oncomplete="showDialogPF('frmPrestacion:diPrestacion')" onclick="myFunction();" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"
					value="Agregar" icon="fa fa-plus" />
			</div>
			<p:spacer height="5" />
			<p:dataTable id="tableLugares" var="var" emptyMessage="Lugares de prestacion vacía."
				value="#{requerimiento.lugares}"
				style="white-space:nowrap!important; width:800px; font-size:5px;"
				reflow="true" scrollable="true" editable="true">
				
				<p:ajax event="rowEdit" listener="#{requerimiento.onRowEdit}" update=":form:growl" />
                <p:ajax event="rowEditCancel" listener="#{requerimiento.onRowCancel}" update=":form:growl" />

                <!--  
				<p:column headerText="DEPENDENCIA">
					<p:cellEditor>
		               <f:facet name="output"><h:outputText value="#{var.dependencia}" /></f:facet>
		               <f:facet name="input"><p:inputText id="modelInput" value="#{var.dependencia}" style="width:100%"/></f:facet>
                    </p:cellEditor>
				</p:column>--> 
				
				<p:column headerText="DIRECCION">
				    <p:cellEditor> 
				       <f:facet name="output"><h:outputText value="#{var.direccion}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{var.direccion}" style="width:100%" /></f:facet>
					</p:cellEditor>  
				</p:column>

				<p:column headerText="EDITAR" styleClass="c_center" style="width: 9%;">
				  <p:rowEditor editTitle="Editar"/>
				</p:column>
				
				
				<p:column headerText="ELIMINAR" styleClass="c_center" style="width: 9%;">
						<p:commandButton 
							update=":formEsp:diEsp,:form:growl" icon="fa fa-remove" title="Eliminar"
							actionListener="#{requerimiento.eliminarLugar(var)}"
							>
						</p:commandButton>
				</p:column>
			</p:dataTable>
		</p:tab>

		<p:tab title="Forma de pago" id="formPago">
			<div align="right">
				<p:commandButton
					oncomplete="showDialogPF('frmPago:diPago')" onclick="myFunctionPago();" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"
					value="Agregar" icon="fa fa-plus" />
			</div>
			<p:spacer height="5" />
				<p:dataTable id="tablePagos" var="var"  emptyMessage="Formas de pago vacía." value="#{requerimiento.pagos}" style="white-space:nowrap!important; width:800px; font-size:5px;" reflow="true" scrollable="true" editable="true">
					
					<p:ajax event="rowEdit" listener="#{requerimiento.onRowEdit2}" update=":form:growl,:formEsp:accordion:tablePagos" />
					<p:ajax event="rowEditCancel" listener="#{requerimiento.onRowCancel2}" update=":form:growl" />
					
					<p:column headerText="NÚMERO ARMADA">
					<p:cellEditor>
		               <f:facet name="output"><h:outputText value="#{var.numero}" /></f:facet>
		               <f:facet name="input"><p:inputText id="modelInput" value="#{var.numero}" style="width:100%"/></f:facet>
                    </p:cellEditor>
				   </p:column>
				   <p:column headerText="PORCENTAJE DE ARMADA">
				    <p:cellEditor> 
				       <f:facet name="output"><h:outputText value="#{var.porcentaje}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{var.porcentaje}" style="width:100%" /></f:facet>
					</p:cellEditor>  
				    </p:column>
  
					<p:column headerText="EDITAR" styleClass="c_center" style="width: 9%;">
				         <p:rowEditor editTitle="Editar" />
				    </p:column>
				
				    <p:column headerText="ELIMINAR" styleClass="c_center" style="width: 9%;">
						<p:commandButton 
							update=":formEsp:diEsp,:form:growl" icon="fa fa-remove" title="Eliminar"
							actionListener="#{requerimiento.eliminarPago(var)}"
							>
						</p:commandButton>
				   </p:column>
				      
				      <p:column  rowspan="#{fn:length(requerimiento.pagos)}" style="width: 15%;">			    
				        <p:outputLabel value="TOTAL % #{requerimiento.totalPorcentaje}." id="footerTotal"></p:outputLabel>		
				      </p:column>	  	               
			       
			  	
				</p:dataTable>
		</p:tab>

		<p:tab title="Anexos">
          <h:form>
             <p:outputLabel value="Archivo formato PDF hasta 10 MB"/>
             <p:fileUpload fileUploadListener="#{requerimiento.handleFileUpload}" mode="advanced" dragDropSupport="false" update=":form:growl" sizeLimit="100000" fileLimit="3" allowTypes="/(\.|\/)(pdf)$/"  
             label="Seleccione archivo" cancelLabel="Cancelar" uploadLabel="Subir" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"/>
             
          </h:form>
		</p:tab>
		<p:tab title="Responsable de las coordinaciones">
			<h:panelGrid columns="6" cellpadding="10">
				<p:column>
					<p:outputLabel value="Nombre del responsable" />
				</p:column>
				<p:column>
					<p:inputText style="width:200px"
						value="#{requerimiento.documentotecnico.nombreresponsable}"
						disabled="true" />
				</p:column>
				<p:column>
					<p:outputLabel value="Correo electrónico" />
				</p:column>
				<p:column>
					<p:inputText style="width:200px"
						value="#{requerimiento.documentotecnico.correoresponsable}"
						disabled="true" />
				</p:column>
				<p:column>
					<p:outputLabel value="Nro Anexo" />
				</p:column>
				<p:column >
					<p:inputText 
						value="#{requerimiento.documentotecnico.nroanexoresponsable}" disabled="#{requerimiento.requerimientoResponse.estadoPedidoIn eq 3}"
						 />
				</p:column>
			</h:panelGrid>
		</p:tab>
	</p:accordionPanel>


</p:outputPanel>














</html>
