<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:func="http://resources/functions"
	xmlns:p="http://primefaces.org/ui">


<p:outputPanel>




	<p:accordionPanel multiple="true" id="accordion">
		<p:tab title="Datos del proceso de selección">

			<p:dataGrid id="panelGridCabecera" var="var" value="#{contrato.listaSeguimiento}" 
				columnClasses="label,value" styleClass="gandalfTableClass">
                  
                   <table>
                   <tr>
						<td><p:outputLabel value="Tipo de proceso (SIGA)" /></td>
						
						<td><p:inputText value="#{var.tipoProceso}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
					
						<td><p:outputLabel value="Número de proceso" /></td>
			
						<td><p:inputText value="#{var.nroProceso}" disabled="true" style="background-color:#EEF0E4;"/></td>
			
						<td><p:outputLabel value="Tipo de bien(SIGA)" /></td>
			           
						<td><p:inputText value="#{var.nombreTipoBien}" disabled="true" style="background-color:#EEF0E4;"/></td>
	               </tr>
	               <tr>
						<td><p:outputLabel value="Fecha de Registro(SIGA)" /></td>
			
						<td>
						    <p:inputText value="#{var.fechaReg}" disabled="true" style="background-color:#EEF0E4;">
						      <f:convertDateTime pattern="MM/dd/yyyy" />
						    </p:inputText>
						</td>
			
						<td><p:outputLabel value="Monto del proceso(SIGA)" /></td>
		
						<td><p:inputText value="#{var.montoProceso}" disabled="true" style="background-color:#EEF0E4;"/></td>
	
						<td><p:outputLabel value="Número de PAO(SIGA)" /></td>
	
						<td><p:inputText value="#{var.nroConsolid}" disabled="true" style="background-color:#EEF0E4;"/></td>
					</tr>	
                    <tr>
              
				         <td><p:outputLabel value="Descripción(SIGA)" style="" /></td>
				         
				         <td><p:inputTextarea value="#{var.especTecnicas}" disabled="true" style="width:300px; background-color:#EEF0E4;"/></td>
				         
                         <td><p:outputLabel value="Estado proceso(SIGA)" /></td>
                         
                         <td><p:inputText value="#{var.estadoProceso}" disabled="true" style="background-color:#EEF0E4;"/></td>
                    </tr>
                   </table>
			</p:dataGrid>


		</p:tab>

		<p:tab title="Información del contrato" titleStyleClass="blueTab">
		
		
		
		<p:dataGrid id="panelGridCabecera2" var="var" value="#{contrato.listaSeguimiento}" styleClass="gandalfTableClass"
				columnClasses="label,value">
              <table>
				<tr>
						<td><p:outputLabel value="Número de contrato" /></td>
						<td><p:inputText value="#{var.nroContrato}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
					
						<td><p:outputLabel value="Fecha de contrato" /></td>
						<td>
						   <p:inputText value="#{var.fechaContrato}" disabled="true" style="width:200px; background-color:#EEF0E4;">
						     <f:convertDateTime pattern="MM/dd/yyyy" />
						   </p:inputText>
						</td>
					
						<td><p:outputLabel value="Nro de Item Adjudicado" /></td>
						<td><p:inputText value="#{var.item}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
					
				</tr>
				<tr>
						<td><p:outputLabel value="Fecha inicial" /></td>
						<td>
						    <p:inputText value="#{var.fechaInicial}" disabled="true" style="width:200px; background-color:#EEF0E4;; ">
						      <f:convertDateTime pattern="MM/dd/yyyy" />
						    </p:inputText>	
						</td>
				
						<td><p:outputLabel value="Fecha final" /></td>
						<td>
						    <p:inputText value="#{var.fechaFinal}" disabled="true" style="width:200px; background-color:#EEF0E4;;">
						      <f:convertDateTime pattern="MM/dd/yyyy" />
						    </p:inputText>
						</td>
					
						<td><p:outputLabel value="Monto contrato" /></td>
						<td><p:inputText value="#{var.montoContrato}" disabled="true" style="width:200px; background-color:#EEF0E4;;"/></td>
					
				</tr>
				<tr>
						<td><p:outputLabel value="Ruc del contratista" /></td>
						<td><p:inputText value="#{var.nroRuc}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
					
						<td><p:outputLabel value="Contratista" /></td>
						<td><p:inputText value="#{var.nombreProv}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
					
						<td><p:outputLabel value="Tipo de contrato" /></td>
						<td><p:inputText value="#{var.idCatalogoTipoContrato}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
					
				</tr>
				<tr>
						<td><p:outputLabel value="Número de CPP" /></td>
						<td><p:inputText value="#{var.nroCp}"  disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
				
						<td><p:outputLabel value="Monto de certificación" /></td>
						<td><p:inputText value="#{var.montoCp}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
						
						<td><p:outputLabel value="Fecha de recepcion del expediente" /></td>
						<td>
						   <p:inputText value="#{var.fechaRecepcionExpediente}" disabled="true" style="width:200px; background-color:#EEF0E4;">
						      <f:convertDateTime pattern="MM/dd/yyyy" />
						   </p:inputText>
						   
						</td>

						
				</tr>	
				<tr>
						<td><p:outputLabel value="Abogado del contrato" /></td>
						<td>
						    <p:inputText value="#{var.dniAbogado}" disabled="false" style="width:200px" id="dniAbogado"/>
						    <p:watermark for="dniAbogado" value="INGRESE EL DNI DEL ABOGADO" />
						</td>
					
						<td><p:outputLabel value="Apellidos y nombres del abogado" /></td>
						<td>
						    <p:inputText value="#{var.nombreAbogado}" disabled="false" style="width:200px" id="nomAbogado"/>
						    <p:watermark for="nomAbogado" value="INGRESE APELLIDOS Y NOMBRES" />
						</td>
					
				        <p:column colspan="2">
						<td><p:outputLabel value="Cantidad de armadas" /></td>
						<td><p:inputText value="#{var.cantidadArmadas}" disabled="true" style="width:200px; background-color:#EEF0E4;"/></td>
						</p:column>
						
						
				</tr>	
				<tr>
						
						<td><p:outputLabel value="Sistema de adquisición" /></td>
						<td>
							<p:selectOneMenu value="#{var.idCatalogoSistemaAdquisicion}" style="width:200px;" >	
							     <f:selectItem itemLabel="SELECCIONAR" itemValue="" />				
							     <f:selectItems
											value="#{contrato.listaGentablaIdcatalogosistemaadquisicion}"
											var="var1" itemLabel="#{var1.vchregdescri}"
											itemValue="#{var1.vchregcodigo}" />		
							</p:selectOneMenu>
						</td>
					
					    <td><p:outputLabel value="Plazo de ejecución" /></td>
						<td>
						    <p:inputText value="#{var.plazoEjecucion}"  style="width:200px" id="plazoEjecucion"/>
						    <p:watermark for="plazoEjecucion" value="INGRESE NUMERO DE PLAZO" />
						</td>
						
						
                </tr>
				<tr>
				   <td colspan="6">
		            
						<p:outputLabel value="Archivo" />
						<p:fileUpload fileUploadListener="#{contrato.handleFileUpload}" process="@this"  mode="advanced" dragDropSupport="false" sizeLimit="100000" fileLimit="3" allowTypes="/(\.|\/)(pdf)$/"  
                         label="Seleccione archivo" cancelLabel="Cancelar" uploadLabel="Subir"/>
                   </td>             
                </tr>         
             </table>            
           </p:dataGrid>
		</p:tab>

		<p:tab title="Control de órdenes" >
		   <p:panel id="panelOrden">
		   
		   <table>
		   <tr>
		       <td><p:outputLabel value="Ejercicio"/></td> 
		       <td>
		          <p:selectOneMenu  value="#{contrato.ordenListaDto.ejercicio}" style="width:150px;">						
						  <f:selectItem itemLabel="SELECCIONAR" itemValue=""/>
						  <f:selectItems value="#{contrato.listaAnio}" />
		          </p:selectOneMenu>	
		       </td>			  
			   <td><p:outputLabel value="Número de Orden"/></td> 
			   <td><p:inputText id="inputOrden" value="#{contrato.ordenListaDto.nroOrden}"/></td> 
               <td>
                   <p:commandButton  id="btnBuscar" value="Buscar" icon="fa fa-search" title="Buscar" actionListener="#{contrato.ordenBuscar}"
                   oncomplete="showDialogPF(':formOrden:dialogOrden')" update=":formOrden:dialogOrden"/>
               
               </td>	
            </tr>
            </table>
            <p:spacer height="10"/>
            <p:dataTable id="tblListaOrden" editable="true" selection="#{contrato.orden1}"
									value="#{contrato.listaOrden}" var="var"
									emptyMessage="No se encontraron registros"
									widgetVar="tblListaOrden" paginator="false"
									rows="#{sisabascontrol.registros_mant}"
									paginatorPosition="bottom" selectionMode="single"
									rowKey="#{var.nroOrden}" styleClass="gandalfTableClass">
									
									<p:ajax event="rowEdit" 
									    listener="#{contrato.onRowEdit}"
									    update=":formSeg:msgs,formSeg:accordion:tblListaEntregable"/>
									<p:ajax event="rowEditCancel"
										listener="#{contrato.onRowCancel}" update=":formSeg:msgs,formSeg:accordion:tblListaEntregable" />
									<p:ajax event="rowSelect" listener="#{contrato.fer}" update=":formSeg:msgs,formSeg:accordion:tblListaEntregable,:formSeg:accordion:tblListaPagosSiaf" />
									 
                                    <p:column headerText="Número" width="4%">
										<h:outputText value="#{var.posicion}" />
									</p:column>
									<p:column headerText="Número de Orden">
										<f:facet name="header">
											<h:outputText value="Número Orden"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.nroOrden}" />
									</p:column>
									<p:column headerText="Fecha Orden">
										<f:facet name="header">
											<h:outputText value="Fecha Orden">
											</h:outputText>
										</f:facet>
										<h:outputText value="#{var.fechaOrden}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:outputText>
									</p:column>
									<p:column headerText="Tipo de bien">
										<f:facet name="header">
											<h:outputText value="Tipo de bien"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.tipoBienDesc}" />
									</p:column>
									<p:column headerText="Nro. RUC">
										<f:facet name="header">
											<h:outputText value="Nro. RUC"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.nroRuc}" />
									</p:column>
									<p:column headerText="Proveedor">
										<f:facet name="header">
											<h:outputText value="Proveedor"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.nombreProveedor}" />
									</p:column>
									<p:column headerText="Importe Orden">
										<f:facet name="header">
											<h:outputText value="Importe Orden"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.totalFactSoles}" />
									</p:column>
									<p:column headerText="Importe devengado">
										<f:facet name="header">
											<h:outputText value="Importe devengado"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.importeDevengado}" />
									</p:column>
									<p:column headerText="Expediente SIAF">
										<f:facet name="header">
											<h:outputText value="Expediente SIAF"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.nroExpedienteSiaf}" />
									</p:column>
									<p:column headerText="Estado SIAF">
										<h:outputText value="#{var.estadoSiafDesc}" />
									</p:column>
									<p:column headerText="Armadas">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.armadas}" />
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber value="#{var.armadas}" style="width:100%"
													label="Year" maxlength="2" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Inicio de prestación">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.fechaInicioPrestacion}">
														<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
													</h:outputText>
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:calendar value="#{var.fechaInicioPrestacion}"
													required="false" pattern="dd/MM/yyyy"
													label="Fecha Consentimiento Buena Pro" navigator="true"
													locale="es" styleClass="dateTimeField" style="width:100%" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Acciones" >
										<p:rowEditor editTitle="Editar" />
									</p:column>
								</p:dataTable>
			</p:panel>
		</p:tab>


         <p:tab title="Control de pagos por entregables">
			<p:panel>
			<p:spacer height="5" />
			<p:dataTable id="tblListaEntregable"
									value="#{contrato.listaEntregable}" var="var"
									emptyMessage="No se encontraron registros"
									widgetVar="tblListaEntregable" paginator="false"
									rows="#{sisabascontrol.registros_mant}"
									paginatorPosition="bottom" selectionMode="single"
									rowKey="#{var.descripcion}" styleClass="gandalfTableClass"
									editable="true">

									<!-- 
									<p:ajax event="rowEdit" listener="{programacion.onRowEdit}"
										update=":form:growl" />
									<p:ajax event="rowEditCancel"
										listener="{programacion.onRowCancel}" update=":form:growl" />
										 -->
									<!-- 
									<p:column headerText="proveido">
										<h:outputText value="UGME" />
									</p:column>
									 -->
									<p:column headerText="Proveido" width="8%">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.proveido}" />
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:inputText value="#{var.proveido}"
													style="width:100%" label="Year" maxlength="2" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Fecha">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.fecha}">
														<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
													</h:outputText>
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:calendar value="#{var.fecha}"
													required="false" pattern="dd/MM/yyyy" label="Fecha"
													navigator="true" locale="es" styleClass="dateTimeField" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Descripción">
										<f:facet name="header">
											<h:outputText value="Descripción"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.descripcion}" />
									</p:column>
									<p:column headerText="Plazos (días)">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.plazo}" />
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber value="#{var.plazo}"
													style="width:100%" label="Year" maxlength="2" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Importe">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.importe}" />
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber value="#{var.importe}" symbol="S/."
													style="width:100%" label="Year" maxlength="2" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Monto de penalidad">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.montoPenalidad}" />
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber value="#{var.montoPenalidad}" symbol="S/." 
													style="width:100%" label="Year" maxlength="20"
													decimalPlaces="2" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Observaciones">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.observacion}" />
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:inputText value="#{var.observacion}"
													style="width:100%" label="Year" maxlength="500" />
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Estado">
										<p:cellEditor>
											<f:facet name="header">
												<f:facet name="output">
													<h:outputText value="#{var.estado}" />
												</f:facet>
											</f:facet>
											<f:facet name="input">
												<p:selectOneMenu value="#{var.estado}"
													id="dllIdcatalogoestadoentregable" required="false"
													label="Estado">
													<f:selectItem itemLabel="--Seleccione--" itemValue="" />
													<f:selectItems
														value="#{programacion.listaGentablaIdcatalogoestadoentregable}"
														var="var1" itemLabel="#{var1.vchregdescri}"
														itemValue="#{var1.vchregcodigo}" />
												</p:selectOneMenu>
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Acciones">
										<p:rowEditor editTitle="Editar" />
									</p:column>
								</p:dataTable>
			</p:panel>
		</p:tab>

		<p:tab title="Detalle de pagos por orden" id="formPago">
           <p:panel>
			<p:spacer height="5" />
				<p:dataTable id="tblListaPagosSiaf"
									value="#{contrato.listaSeguimientoPagosSiaf}" var="var"
									emptyMessage="No se encontraron registros"
									widgetVar="tblListaPagosSiaf" paginator="true"
									paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} Total registros: #{fn:length(contrato.listaSeguimientoPagosSiaf)}"
									rows="#{sisabascontrol.registros_mant}"
									paginatorPosition="bottom" selectionMode="single"
									rowKey="#{var.expediente}" styleClass="gandalfTableClass">
									<p:column headerText="Ciclo">
										<f:facet name="header">
											<h:outputText value="Ciclo"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.ciclo}" />
									</p:column>
									<p:column headerText="Fase">
										<f:facet name="header">
											<h:outputText value="Fase"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.fase}" />
									</p:column>
									<p:column headerText="Tipo de documento">
										<f:facet name="header">
											<h:outputText value="Tipo de documento"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.tipoDocumentoDesc}" />
									</p:column>
									<p:column headerText="Número documento">
										<f:facet name="header">
											<h:outputText value="Número documento"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.nroDocumento}" />
									</p:column>
									<p:column headerText="Fecha Doc.">
										<f:facet name="header">
											<h:outputText value="Fecha Doc."></h:outputText>
										</f:facet>
										<h:outputText value="#{var.fechaDocumento}" />
									</p:column>
									<p:column headerText="Monto">
										<f:facet name="header">
											<h:outputText value="Monto"></h:outputText>
										</f:facet>
										<h:outputText value="#{var.monto}" />
									</p:column>
				</p:dataTable>
			</p:panel>	
		</p:tab>
	  
	</p:accordionPanel>

</p:outputPanel>




</html>
